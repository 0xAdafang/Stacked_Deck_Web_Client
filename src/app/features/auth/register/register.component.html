<h2>Create an account</h2>

<form [formGroup]="form" (ngSubmit)="submit()">

  <label>
    Email
    <input type="email" formControlName="email" />
  </label>
  <div *ngIf="form.get('email')?.touched && form.get('email')?.invalid" class="error">
    Invalid email
  </div>

  <label>
    Username
    <input type="text" formControlName="username" />
  </label>
  <div *ngIf="form.get('username')?.touched && form.get('username')?.invalid" class="error">
    Invalid username
  </div>

  <label>
    Password
    <input type="password" formControlName="password" />
  </label>
  <div *ngIf="form.get('password')?.touched && form.get('password')?.invalid" class="error">
    Minimum 8 characters.
  </div>

  <label>
    Confirm password
    <input type="password" formControlName="confirmPassword" />
  </label>
  <div *ngIf="form.hasError('mismatch')" class="error">
    passwords dosen't match
  </div>

  <div *ngIf="serverError" class="error">
    {{ serverError }}
  </div>

  <button type="submit" [disabled]="form.invalid || submitting">
    {{ submitting ? 'Creation...' : 'Create account' }}
  </button>

</form>
