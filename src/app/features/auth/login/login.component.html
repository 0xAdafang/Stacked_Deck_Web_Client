<div class="split-screen-wrapper">

  <div class="visual-panel">
    <div class="animated-background-pattern"></div>
    <div class="overlay-glow"></div>
    <div class="visual-content">
      <h1>Welcome to the Vault.</h1>
      <p>Access restricted to authorized personnel only.</p>
    </div>
  </div>

  <div class="form-panel">
    <div class="login-container">
      <h2>Sign In</h2>
      <p class="subtitle">Enter your credentials to access your account.</p>

      <div *ngIf="verified" class="alert alert-success">
        Your account has been successfully verified.
      </div>
      <div *ngIf="errorMessage" class="alert alert-error">
        {{ errorMessage }}
      </div>
      <div *ngIf="errorMsg" class="alert alert-warning">
        {{ errorMsg }}
        <a [routerLink]="['/auth/resend-verification']" [queryParams]="{ email: unverifiedEmail }">Resend email</a>
      </div>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

        <div class="form-group">
          <label for="username">Username / Email</label>
          <div class="input-wrapper">
            <input
              type="text"
              id="username"
              formControlName="username"
              placeholder="Ex: Giovanni"
              [class.error]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched"
            >
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          </div>
          <div *ngIf="loginForm.get('username')?.invalid && loginForm.get('username')?.touched" class="field-error">
            Username is required
          </div>
        </div>

        <div class="form-group">
          <div class="label-row" style="display:flex; justify-content:space-between;">
            <label for="password">Password</label>
            <a routerLink="/auth/forgot-password" class="forgot-link" style="color:#ef4444; font-size:0.8rem; text-decoration:none;">Forgot?</a>
          </div>

          <div class="input-wrapper">
            <input
              type="password"
              id="password"
              formControlName="password"
              placeholder="••••••••"
              [class.error]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched"
            >
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="input-icon"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
          </div>
          <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="field-error">
            Password is required
          </div>
        </div>

        <button type="submit" [disabled]="loginForm.invalid" class="btn-login">
          Access Account
        </button>

        <div class="register-link">
          Don't have an account? <a routerLink="/auth/register">Join the team</a>
        </div>
      </form>
    </div>
  </div>
</div>
