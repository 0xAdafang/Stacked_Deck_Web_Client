<div [class.dark-theme]="isDark" [class.light-theme]="!isDark" class="header-wrapper">

  <!-- Top Bar -->
  <div class="top-bar">
    <div class="container">
      <div class="promo-text">
        ðŸŽ´ Free shipping on orders over $50
      </div>
      <button class="theme-toggle" (click)="toggleTheme()" [attr.aria-label]="isDark ? 'Switch to light mode' : 'Switch to dark mode'">
        <svg *ngIf="isDark" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="4"></circle>
          <path d="M12 2v2"></path>
          <path d="M12 20v2"></path>
          <path d="m4.93 4.93 1.41 1.41"></path>
          <path d="m17.66 17.66 1.41 1.41"></path>
          <path d="M2 12h2"></path>
          <path d="M20 12h2"></path>
          <path d="m6.34 17.66-1.41 1.41"></path>
          <path d="m19.07 4.93-1.41 1.41"></path>
        </svg>
        <svg *ngIf="!isDark" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Main Header -->
  <header class="main-header">
    <div class="container">
      <div class="header-content">

        <!-- Logo -->
        <a routerLink="/" class="logo">
          <span class="logo-primary">STACKED</span>
          <span class="logo-accent">DECK</span>
          <div class="logo-underline"></div>
        </a>

        <!-- Search Bar - Desktop -->
        <div class="search-wrapper desktop-search">
          <input
            type="text"
            [(ngModel)]="searchQuery"
            (keyup.enter)="onSearch()"
            placeholder="Search for PokÃ©mon cards..."
            class="search-input"
          />
          <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.3-4.3"></path>
          </svg>
        </div>

        <!-- Actions -->
        <div class="header-actions">
          <!-- Cart -->
          <button class="action-btn cart-btn" routerLink="/cart">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="8" cy="21" r="1"></circle>
              <circle cx="19" cy="21" r="1"></circle>
              <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"></path>
            </svg>
            <span *ngIf="cartCount > 0" class="cart-badge">{{ cartCount }}</span>
          </button>

          <!-- Account -->
          <button class="action-btn account-btn desktop-only" routerLink="/account">
            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
              <circle cx="12" cy="7" r="4"></circle>
            </svg>
          </button>

          <!-- Mobile Menu Toggle -->
          <button class="action-btn mobile-menu-btn mobile-only" (click)="toggleMobileMenu()">
            <svg *ngIf="!mobileMenuOpen" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="4" x2="20" y1="12" y2="12"></line>
              <line x1="4" x2="20" y1="6" y2="6"></line>
              <line x1="4" x2="20" y1="18" y2="18"></line>
            </svg>
            <svg *ngIf="mobileMenuOpen" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 6 6 18"></path>
              <path d="m6 6 12 12"></path>
            </svg>
          </button>
        </div>
      </div>

      <!-- Navigation - Desktop -->
      <nav class="desktop-nav">
        <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">Home</a>
        <a routerLink="/products" routerLinkActive="active" class="nav-link">PokÃ©mon</a>
        <a routerLink="/new-releases" routerLinkActive="active" class="nav-link">New Releases</a>
        <a routerLink="/best-sellers" routerLinkActive="active" class="nav-link">Best Sellers</a>
        <a routerLink="/graded" routerLinkActive="active" class="nav-link">Graded Cards</a>
      </nav>

      <!-- Search Bar - Mobile -->
      <div class="search-wrapper mobile-search">
        <input
          type="text"
          [(ngModel)]="searchQuery"
          (keyup.enter)="onSearch()"
          placeholder="Search cards..."
          class="search-input"
        />
        <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.3-4.3"></path>
        </svg>
      </div>
    </div>

    <!-- Mobile Menu -->
    <nav *ngIf="mobileMenuOpen" class="mobile-nav">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="mobile-nav-link" (click)="toggleMobileMenu()">Home</a>
      <a routerLink="/products" routerLinkActive="active" class="mobile-nav-link" (click)="toggleMobileMenu()">PokÃ©mon</a>
      <a routerLink="/new-releases" routerLinkActive="active" class="mobile-nav-link" (click)="toggleMobileMenu()">New Releases</a>
      <a routerLink="/best-sellers" routerLinkActive="active" class="mobile-nav-link" (click)="toggleMobileMenu()">Best Sellers</a>
      <a routerLink="/graded" routerLinkActive="active" class="mobile-nav-link" (click)="toggleMobileMenu()">Graded Cards</a>
      <a routerLink="/account" routerLinkActive="active" class="mobile-nav-link account-link" (click)="toggleMobileMenu()">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        My Account
      </a>
    </nav>
  </header>
</div>
